<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="../blog/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="../blog/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="../blog/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Hexo </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?11bd8a056d4f86a1f9728e2c4d88b16d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="../blog/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Hexo</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      

      
      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="../blog/2016/01/23/ListView ScrollView 不得不说的一些事/" itemprop="url">
                  ListView ScrollView 不得不说的一些事
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-01-23T00:20:52+08:00" content="2016-01-23">
              2016-01-23
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="../blog/2016/01/23/ListView ScrollView 不得不说的一些事/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/23/ListView ScrollView 不得不说的一些事/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="../blog/2016/01/23/ListView ScrollView 不得不说的一些事/" class="leancloud_visitors" data-flag-title="ListView ScrollView 不得不说的一些事">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>因为其实也不是第一次遇到这样的问题了.即便是第二次遇到这个问题.依然是让我头疼不已.<br>很多时候会遇到一些需求是需要在 ScrollView 中嵌套 ListView 的.对于这种情况我熟悉的有两种解决方案</p>
<h1 id="ScrollView__u4E2D_u5D4C_u5957_ListView"><a href="#ScrollView__u4E2D_u5D4C_u5957_ListView" class="headerlink" title="ScrollView 中嵌套 ListView"></a>ScrollView 中嵌套 ListView</h1><h2 id="1-_u5C06_ListView__u4E4B_u5916_u7684_u90E8_u5206_u4F5C_u4E3A_ListView__u4E2D_u7684_u4E00_u90E8_u5206"><a href="#1-_u5C06_ListView__u4E4B_u5916_u7684_u90E8_u5206_u4F5C_u4E3A_ListView__u4E2D_u7684_u4E00_u90E8_u5206" class="headerlink" title="1.将 ListView 之外的部分作为 ListView 中的一部分."></a>1.将 ListView 之外的部分作为 ListView 中的一部分.</h2><p>这个方法是在getView中对 position 进行判断并处理。<br>这个方法能满足几乎所有的情况，但是这样的话在 Adapter 中 getView 方法里的代码就过于复杂了。</p>
<h2 id="2-_u91CD_u5199_ListView"><a href="#2-_u91CD_u5199_ListView" class="headerlink" title="2.重写 ListView"></a>2.重写 ListView</h2><p>自定义 View 继承 ListView<br>重写onMeasure方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 重写该方法，达到使ListView适应ScrollView的效果</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> expandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE &gt;&gt; <span class="number">2</span>, MeasureSpec.AT_MOST);</span><br><span class="line">    <span class="keyword">super</span>.onMeasure(widthMeasureSpec, expandSpec);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这个方法我暂时发现了一个问题，就是在初次加载的时候会加载一次 ListView 中所有的 View，虽然通过在 Adapter 中使用 convertView 可以避免内存溢出,但是在 Count 数量很大的情况下会消耗较长时间。</p>
<p>更多方法可以<a href="http://bbs.anzhuo.cn/thread-982250-1-1.html" target="_blank" rel="external">点击这里</a>查看</p>
<h1 id="ScrollView__u4E2D_u5D4C_u5957_ViewPage"><a href="#ScrollView__u4E2D_u5D4C_u5957_ViewPage" class="headerlink" title="ScrollView 中嵌套 ViewPage"></a>ScrollView 中嵌套 ViewPage</h1><p>在 ScrollView 中嵌套 ViewPage 会出现点击事件无响应且无法滑动的情况。<br>这时候可以重写 ScrollView<br>自定义一个 View 继承ScrollView<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyScrollView</span> <span class="keyword">extends</span> <span class="title">ScrollView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> canScroll;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> GestureDetector mGestureDetector;</span><br><span class="line">    View.OnTouchListener mGestureListener;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyScrollView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs);</span><br><span class="line">        mGestureDetector = <span class="keyword">new</span> GestureDetector(<span class="keyword">new</span> YScrollDetector());</span><br><span class="line">        canScroll = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(ev.getAction() == MotionEvent.ACTION_UP)</span><br><span class="line">            canScroll = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onInterceptTouchEvent(ev) &amp;&amp; mGestureDetector.onTouchEvent(ev);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">YScrollDetector</span> <span class="keyword">extends</span> <span class="title">SimpleOnGestureListener</span> </span>&#123;</span><br><span class="line">        <span class="annotation">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onScroll</span><span class="params">(MotionEvent e1, MotionEvent e2, <span class="keyword">float</span> distanceX, <span class="keyword">float</span> distanceY)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(canScroll)</span><br><span class="line">                <span class="keyword">if</span> (Math.abs(distanceY) &gt;= Math.abs(distanceX))</span><br><span class="line">                    canScroll = <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    canScroll = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">return</span> canScroll;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="../blog/2015/12/31/2015年总结/" itemprop="url">
                  2015年总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-31T23:17:11+08:00" content="2015-12-31">
              2015-12-31
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="../blog/2015/12/31/2015年总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/31/2015年总结/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="../blog/2015/12/31/2015年总结/" class="leancloud_visitors" data-flag-title="2015年总结">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>首先，仔细回想了一下这一年，用一个词来形容的话就是荒废。<br>这一年，我开发了第一款属于自己独立开发的 APP，第一次对某公司现有 APP 进行了短期的更新与维护，第一次去学习 Android 开发以外其它的开发技术……<br>虽然这一年我有很多的第一次，但是真在的感觉到了自己的荒废。没有了最初学习的那种努力，开始无意义无目的的学习。没有了以前熬夜编码的精力，开始纠结自己的身体状况。<br>这一年做了很多，但是远没有我想像中收获的那么多，很多时候看到某某公司招聘要求是3年以上开发经验，但是我这一年下来并没有感觉我的提升有我想象中那么大。我不知道用这样的进度，两年后我的 Android 技能树能点到多少，因为我知道，越到后面，提升越难。<br>这一年，我仅仅只是在去年的基础上学会了 Android 中在我看来极小部分的知识<br>这一年，我仅仅是了解了 javaweb 开发的一些基本知识<br>这一年，我仅仅是学了很多 但会的不多<br>作为程序员，我这一年只做了这些。<br>作为一个学生，我只能说我的大学生活过去一半了，英语也还一直是挂，时间也越来越不够用了。<br>希望我明年能在 Android 开发方面再有突破，对 Linux 和 C 语言进行更系统的学习，开始涉及 Android 底层方面的开发，在 Android开发这条路上能越走越远。<br>希望我明年也能对自己好好的，少熬夜，少熬夜，少熬夜！</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="../blog/2015/11/05/原-记一次接口开发/" itemprop="url">
                  记一次接口开发
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-11-05T03:20:46+08:00" content="2015-11-05">
              2015-11-05
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="../blog/2015/11/05/原-记一次接口开发/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/05/原-记一次接口开发/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="../blog/2015/11/05/原-记一次接口开发/" class="leancloud_visitors" data-flag-title="记一次接口开发">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最开始写这个接口的时候是发现了这个网站登录的一个小 bug，可以不验证验证码来完成登录操作。</p>
<p>然后因为一些原因，网站方面发现了这个bug 并进行了修复。所以我就不得不进行验证码的识别。</p>
<p>写了好了验证码的识别，发现识别成功率也有百分之八十以上，就准备写进接口当中。可是发现还是会一直提示验证码错误，然后我纠结了很久都没有想明白到底是为什么。</p>
<p>然后突然想起来了验证码的验证机制，是通过 Session 来判断的。所以我应当在获取验证码的时候保存 SessionId 然后之后的访问都通过这个 Session 来进行。</p>
<p>总结：好好学后台、、</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="../blog/2015/08/16/原-黑苹果系统迁移/" itemprop="url">
                  黑苹果系统迁移
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-08-16T20:05:26+08:00" content="2015-08-16">
              2015-08-16
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="../blog/2015/08/16/原-黑苹果系统迁移/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/16/原-黑苹果系统迁移/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="../blog/2015/08/16/原-黑苹果系统迁移/" class="leancloud_visitors" data-flag-title="黑苹果系统迁移">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这就是做个记录、记录、折腾，啊不，是被电脑折腾了几天。一开始黑苹果系统装在机械硬盘上的，然后感觉反应有点慢。于是想移到SSD上，可是一开始黑苹果分区170G。SSD才120G。然后就直接用磁盘工具copy磁盘行不通！然后我就郁闷了，就试了下把磁盘打包成dmg。依然不行。在用Time Machine直接恢复也不行。。最后只好在SSD上装好黑苹果，然后再在新的系统里面使用系统迁移把原系统迁移过来。。。经过一整天得折腾总算是弄好了、有钱就换苹果，哎，黑苹果玩的心累。</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="../blog/2015/08/10/原-Android-Navigation的使用/" itemprop="url">
                  Android Navigation的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-08-10T22:44:31+08:00" content="2015-08-10">
              2015-08-10
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="../blog/2015/08/10/原-Android-Navigation的使用/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/10/原-Android-Navigation的使用/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="../blog/2015/08/10/原-Android-Navigation的使用/" class="leancloud_visitors" data-flag-title="Android Navigation的使用">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>昨天发现谷歌提供Navigation这么一个东西。可以实现侧滑菜单……</p>
<p>然后看了会文档……不知道是我没看全还是什么原因，感觉文档写的还是挺不错的，但是我也写下好了。</p>
<p>首先。上布局文件。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">android.support.v4.widget.DrawerLayout</span></span><br><span class="line">    <span class="attribute">xmlns:android</span>= <span class="attribute">http:</span>//<span class="attribute">schemas.android.com</span>/<span class="attribute">apk</span>/<span class="attribute">res</span>/<span class="attribute">android</span></span><br><span class="line">    <span class="attribute">android:id</span>= @+<span class="attribute">id</span>/<span class="attribute">drawer_layout</span></span><br><span class="line">    <span class="attribute">android:layout_width</span>= <span class="attribute">match_parent</span></span><br><span class="line">    <span class="attribute">android:layout_height</span>= <span class="attribute">match_parent</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">FrameLayout</span></span><br><span class="line">        <span class="attribute">android:id</span>= @+<span class="attribute">id</span>/<span class="attribute">content_frame</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>= <span class="attribute">match_parent</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>= <span class="attribute">match_parent</span>  /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">ListView</span></span><br><span class="line">        <span class="attribute">android:id</span>= @+<span class="attribute">id</span>/<span class="attribute">left_drawer</span></span><br><span class="line">        <span class="attribute">android:layout_width</span>= <span class="attribute">240dp</span></span><br><span class="line">        <span class="attribute">android:layout_height</span>= <span class="attribute">match_parent</span></span><br><span class="line">        <span class="attribute">android:layout_gravity</span>= <span class="attribute">start</span></span><br><span class="line">        <span class="attribute">android:choiceMode</span>= <span class="attribute">singleChoice</span></span><br><span class="line">        <span class="attribute">android:divider</span>= @<span class="attribute">android:color</span>/<span class="attribute">transparent</span></span><br><span class="line">        <span class="attribute">android:dividerHeight</span>= <span class="attribute">0dp</span></span><br><span class="line">        <span class="attribute">android:background</span>= #<span class="attribute">111</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>昂。没错。这就是官方的布局文件。</p>
<p>我要说的就是。这里的LIstView可以换成任意的Layout。但是要注意的就是它的宽不要超过320dp。高度必须match_parent</p>
<p>昂。然后你就可以运行了。会有一个侧滑菜单的，但是里面就是黑黑的一片。什么都没有。</p>
<p>然后就是注意一些属性了。</p>
<p>layout_gravity 这个属性 &nbsp;昂，其实这个我没太看懂，就直接上官方原话好了。。抽屉视图(视图)必须指定它的水平重力与android:layout_gravity属性。支持从右到左的语言(RTL),指定&#20540;与“开始”而不是“左”(右边的抽屉里出现时,布局是RTL)。</p>
<p>然后关于侧滑菜单里面的一些操作就可以写在Java文件中了。</p>
<p>我在说下FrameLayout的使用好了。</p>
<p>其实这个我还不太懂。只是知道让Activity继承FragmentActivity然后使用如下代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FragmentManager fragmentManager =getSupportFragmentManager();</span><br><span class="line">HomeFragment homeFragment = <span class="keyword">new</span> HomeFragment();</span><br><span class="line">fragmentManager.beginTransaction().replace(R.id.framelayout, homeFragment).commit();</span><br></pre></td></tr></table></figure></p>
<p>就可以吧HomeFragment添加到这个FrameLayout里面了。</p>
<p>昂。大概也就这些。哦。还有打开和关闭。。</p>
<p>打开：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mDrawerLayout.openDrawer(mLeftMenu);</span><br></pre></td></tr></table></figure>
<p>mDrawerLayout就是DrawerLayout这个控件。然后mLeftMent就是ListView这个控件。。</p>
<p>关闭</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mDrawerLayout.closeDrawers();</span><br></pre></td></tr></table></figure>
<p>示例代码：<a href="http://download.csdn.net/detail/mcdull_lu/8987981" target="_blank" rel="external">点击打开链接</a></p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="../blog/2015/08/08/原-Android-XML文件链接错误/" itemprop="url">
                  Android XML文件链接错误
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-08-08T15:40:42+08:00" content="2015-08-08">
              2015-08-08
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="../blog/2015/08/08/原-Android-XML文件链接错误/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/08/原-Android-XML文件链接错误/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="../blog/2015/08/08/原-Android-XML文件链接错误/" class="leancloud_visitors" data-flag-title="Android XML文件链接错误">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在开发APP的过程中。一开始我们的美工所有按钮都只给了我一张图。然后我很淡定的都没有做点击效果。。当然啦。美工不给图。我怎么知道怎么做。。。然后。美工一次给了我四十多个按钮的点击效果。呵呵。呵呵。呵呵。然后弄了差不多两个小时。好不容易弄完了。编译、运行。完美。然后发给我们美工过目一遍。可是他告诉我说他手机上一直闪退呀。我就纳闷了。怎么会。。查了下错误信息 &nbsp;</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Binary <span class="keyword">XML</span> <span class="title">file</span> line <span class="comment">#12: Error inflating class</span></span><br></pre></td></tr></table></figure>
<p>纳&#23612;，这是个什么错误。然后纠结了很久。最后都打算撤销这次修改了的时候。我点了下Clean project &nbsp;然后再发给美工。结果奇迹般地就好了。。我也不知道这是为什么。。不过这件事之后。让我每次打包工程前都会Clean一遍。。。</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="../blog/2015/08/03/原-关于开发过程中的一些感想随笔/" itemprop="url">
                  关于开发过程中的一些感想随笔
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-08-03T09:12:55+08:00" content="2015-08-03">
              2015-08-03
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="../blog/2015/08/03/原-关于开发过程中的一些感想随笔/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/03/原-关于开发过程中的一些感想随笔/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="../blog/2015/08/03/原-关于开发过程中的一些感想随笔/" class="leancloud_visitors" data-flag-title="关于开发过程中的一些感想随笔">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本来每天都是写一写技术分享的文章的，然而昨天一整天都是在修改UI上的小问题，我就随意写写这次开发过程自己的一些感受好了。</p>
<p>以后我希望我能每次开个项目的时候就写一篇这样的博文。一步步记录下每一天的开发感受。</p>
<p>这次开发算是比较扯淡的了。最开始不紧不慢的慢慢来。最后又出于各种原因赶工。简直累炸我了。</p>
<p>这次算是第一次真正的系统性的去开发一款APP。发现了自己很多问题。</p>
<p>1.代码调理不清晰。后期想修改一个功能，一直出问题。还以为是怎么了。后来才发现。是我自己代码没搞清楚。</p>
<p>2.不懂善用开源框架。自己写的很多功能其实网络上都有开源的框架的。可是我都没有怎么用到。大多数时候都是自己写。写的也很low，所以我要总结一下常用的框架。以便自己以后不再犯傻。</p>
<p>3.基础知识不牢固。怎么说呢。连最基础的Map数组遍历我都要去Google一下。真觉得我也是够可以的了。有必要好好的巩固Java基础。</p>
<h4 id="u2014_u20142015_u5E748_u67083_u53F7_APP1-0_u5B8C_u6210_u540E"><a href="#u2014_u20142015_u5E748_u67083_u53F7_APP1-0_u5B8C_u6210_u540E" class="headerlink" title="——2015年8月3号 APP1.0完成后"></a>——2015年8月3号 APP1.0完成后</h4><p>哎。我来更新了。本来是该早上起床更新下博客的。可是因为昨天晚上实在太晚睡。然后早上一起床又开始修复bug。所以就没时间来写，其实今天真心累。今天也不知道是什么原因。遇到了很多问题</p>
<p>1.在为很多按钮加上点击效果之后就会出现一个和XML文件有关的异常。好像是没有找到资源文件吧。完全没有任何解决的头绪。Google出来的一些解决方案也是没怎么看懂。</p>
<p>2.OOM。这个真的不想说什么。一开始我以为只有在同一个页面内图片加载量过大才会引起OOM，然后现在更具反馈看了。好像每次finsh()掉界面但是没有释放图片资源。这样的次数多了只会也可能会导致OOM</p>
<p>3.屏幕适配。这个、真晕了。而且遇到一个很奇葩的问题。就是UI那边给我的是1080p的图片文件。我直接随意的放到了hdpi的资源文件夹里。然后就会在ViewPage滑动的时候特别卡。放到xxhdpi的文件夹里就好了。也不知道这是为什么。哈哈哈、</p>
<p>4.dialog。因为很多时候我的会在页面一打开的时候弹出dialog。然后我就会判断页面是否完全打开。如果打开且需要就显示dialog。但是好像在进页面后立刻返回。有概率性的会出现错误。</p>
<p>反正约到了挺多问题的。果然还是应该先好好学习。以后要记住的就是凡是在用到BitMap之后要进行内存释放！！！</p>
<h4 id="u2014_u20142015_u5E748_u67084_u53F7_APP_u4E0A_u7EBF_u7B2C_u4E00_u5929"><a href="#u2014_u20142015_u5E748_u67084_u53F7_APP_u4E0A_u7EBF_u7B2C_u4E00_u5929" class="headerlink" title="——2015年8月4号 APP上线第一天"></a>——2015年8月4号 APP上线第一天</h4><p>昂。我都喜欢后一天的早上更前一天的东西。。这样是不是不太好呀。不过就这样咯。毕竟睡觉之前写的话。。感觉我一下又少了好多睡觉时间呀。要不得要不得。</p>
<p>想想昨天做了些啥。</p>
<p>1.高德地图。居然地图抄的官方Demo还有bug。一个空指针异常的，是地图还没初始化就退出了导致的。加上了判断就解决了。</p>
<p>2.XML文件的一些错误居然在Clean工程之后就解决了。。。好像是重新构建了索引还是连接什么的。不太懂。</p>
<p>3.内存溢出。先是优化了一堆有Bitmap调用的页面。然后又找上美工。把所有的图片给了我三组。1080P。720P。480P三份。然后也好了很多。以后图片都要三份。要三份！</p>
<p>4.发现我的布局文件结构写的好复杂呀。该好好看看文档，看看要不要精简优化下布局文件了。</p>
<p>5.关于ViewPage内存释放的。发现好像我有个地方是五个页面。但是切到第三个的时候第一个的内存并没有被释放掉。。应该是要在Adapter里面做处理的。还好现在页面少。</p>
<p>6.还是XML得问题。我太多的文字都写在布局文件里面了。规范应当是弄到String.Xml文件里面的。也方便做国际化，以后要注意！以后要注意！</p>
<p>好像也就这些了吧。嗯。发现了好多问题。也在慢慢解决问题。O(∩_∩)O哈哈哈~</p>
<h4 id="u2014_u20142015_u5E748_u67086_u53F7_APP_u4E0A_u7EBF_u7B2C_u4E09_u5929"><a href="#u2014_u20142015_u5E748_u67086_u53F7_APP_u4E0A_u7EBF_u7B2C_u4E09_u5929" class="headerlink" title="——2015年8月6号 APP上线第三天"></a>——2015年8月6号 APP上线第三天</h4><p>今天真难过、、肚子痛了一天。昨天晚上一点左右睡的。早上四点多就疼醒了，哎，都是因为没关风扇。还吃不下什么东西，感觉好累昂。</p>
<p>昨天晚上发现谷歌提供了一个Navigation可以做侧滑菜单。哎，我也真是傻，谷歌官方提供的东西居然没有好好地去利用，今天读了一会文档，然后花了几个小时就把项目里面一个用到菜单的地方改成侧滑的了。然后。。有空去把谷歌的一些文档全看一遍好了。。</p>
<p>今天还折腾了会服务器。买了个DO的vps。新加坡节点。感觉还不错。网速可以。还不丢包。。搭好了PHP和JavaWeb的环境。过明天看看做好推送服务的页面挂上去试试。</p>
<p>其实写代码重在细心呀，╮(╯▽╰)╭。今天肚子疼，早点洗洗睡。对自己好一点，么么哒、</p>
<h4 id="u2014_u20142015_u5E748_u670810_u53F7"><a href="#u2014_u20142015_u5E748_u670810_u53F7" class="headerlink" title="——2015年8月10号"></a>——2015年8月10号</h4><p>今天弄了个沉浸状态栏。233333.发现原来把布局中相同或相&#20284;的title提出来单独一个xml文件是一个多么棒的决定了。沉浸状态栏画了一个小时不到就弄完了。。。</p>
<p>今天无聊想弄ss的多用户。弄了半天都没弄好。。无奈了。还废了我基本一天的时间。。。还一直以为wdcp的Apache有问题，最后居然发现是因为我自己不会用。。。23333.自己犯傻了。弄的原定今天写好的推送后台都没弄。又只能明天弄了。orz，早睡早起。早睡早起。。</p>
<h4 id="u2014_u20142015_u5E748_u670811_u65E5"><a href="#u2014_u20142015_u5E748_u670811_u65E5" class="headerlink" title="——2015年8月11日"></a>——2015年8月11日</h4><p>看了下日期。发现我竟然十天没写过博客了。其实不算久昂。可能是最近太闲了吧。呵呵。我这人一闲起来就什么都不想干。不能闲下来的人呀。</p>
<p>昨天吧。一直在折腾电脑。就是下了很多东西。弄弄分区什么的。但是也基本花了一天时间。哎。下午的时候看到有人反馈了一个蛮严重的bug。。刚弄好东西就赶忙找错。修复。推更新。其实心里总有种怪怪的感觉。哎。不想纠结了。</p>
<p>其实再好好看了下MVC框架。发现自己的代码真low。有空整体得改改。</p>
<h4 id="u2014_u20142015_u5E748_u670822_u65E5"><a href="#u2014_u20142015_u5E748_u670822_u65E5" class="headerlink" title="——2015年8月22日"></a>——2015年8月22日</h4>
          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="../blog/2015/08/02/原-关于开发Android应用时写从图库选择头像功能时遇到的一些问题。/" itemprop="url">
                  开发Android应用时写从图库选择头像功能时遇到的一些问题。
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-08-02T15:09:57+08:00" content="2015-08-02">
              2015-08-02
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="../blog/2015/08/02/原-关于开发Android应用时写从图库选择头像功能时遇到的一些问题。/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/02/原-关于开发Android应用时写从图库选择头像功能时遇到的一些问题。/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="../blog/2015/08/02/原-关于开发Android应用时写从图库选择头像功能时遇到的一些问题。/" class="leancloud_visitors" data-flag-title="开发Android应用时写从图库选择头像功能时遇到的一些问题。">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="u2014_u2014_u539F_u6587_u2014_u2014"><a href="#u2014_u2014_u539F_u6587_u2014_u2014" class="headerlink" title="——原文——"></a>——原文——</h2><p>首先是最基本的调用图库获取图像的代码。我直接贴出来。也是当个笔记吧。事实是我记不下来。。。</p>
<p>先是调用系统图库</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_GET_CONTENT);</span><br><span class="line">intent.setType(&amp;quot;image<span class="comment">/*&amp;quot;);</span><br><span class="line">intent.putExtra(&amp;quot;crop&amp;quot;, true);</span><br><span class="line">intent.putExtra(&amp;quot;return-data&amp;quot;, true);</span><br><span class="line">startActivityForResult(intent, 2);</span></span><br></pre></td></tr></table></figure>
<p>然后是获取选择到得图片的uri</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">    <span class="keyword">if</span> (resultCode == RESULT_OK) &#123;</span><br><span class="line">        <span class="keyword">if</span> (requestCode == <span class="number">2</span>) &#123;</span><br><span class="line">            Uri uri = data.getData();</span><br><span class="line">            ContentResolver cr = <span class="keyword">this</span>.getContentResolver();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Bitmap bitmap = BitmapFactory.decodeStream(cr.openInputStream(uri));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样就获取到图片了。But。。现在手机都那么好。随随便便一张照片就十几MB、秒秒钟OOM报错呀。</p>
<p>所以接下来我就改了改代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">BitmapFactory.Options opts = <span class="keyword">new</span> BitmapFactory.Options();</span><br><span class="line">opts.inJustDecodeBounds = <span class="keyword">true</span>;<span class="comment">//指定加载图片方式为只加载头信息</span></span><br><span class="line">BitmapFactory.decodeStream(cr.openInputStream(uri), <span class="keyword">null</span>, opts);<span class="comment">//将头信息加载到opts中</span></span><br><span class="line"><span class="comment">//3.计算缩放比例</span></span><br><span class="line"><span class="keyword">double</span> dx = opts.outWidth/<span class="number">300.0</span>;</span><br><span class="line"><span class="keyword">double</span> dy = opts.outHeight/<span class="number">300.0</span>;</span><br><span class="line"><span class="keyword">int</span> scale = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(dx&amp;gt;dy&amp;amp;&amp;amp;dy&amp;gt;<span class="number">1</span>)&#123;</span><br><span class="line">	System.out.println(&amp;quot;按照水平方法缩放,缩放比例：&amp;quot;+dx);</span><br><span class="line">	scale = (<span class="keyword">int</span>)(dx+<span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dy&amp;gt;dx&amp;amp;&amp;amp;dx&amp;gt;<span class="number">1</span>)&#123;</span><br><span class="line">	System.out.println(&amp;quot;按照垂直方法缩放,缩放比例：&amp;quot;+dy);</span><br><span class="line">	scale = (<span class="keyword">int</span>)(dy+<span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//4.缩放加载图片到内存。</span></span><br><span class="line">opts.inSampleSize = scale;</span><br><span class="line">opts.inJustDecodeBounds = <span class="keyword">false</span>;<span class="comment">//真正的去解析这个位图。</span></span><br><span class="line">Bitmap bitmap = BitmapFactory.decodeStream(cr.openInputStream(uri), <span class="keyword">null</span>, opts);</span><br></pre></td></tr></table></figure>
<p>这段代码主要是利用图片前面都会带有一段信息是图片信息的。第一次加载仅仅是加载头信息。获取到图片的宽高后再根据宽高来设置缩放比例。以避免OOM</p>
<p>But。这有有问题了。这样缩放是等比缩放。然后头像一般都是正方形的。然而我帅气的自拍是长方形的呀。我处女座就不能忍那两边留有的空白了。</p>
<p>于是我默默地弄了两种处理方式：</p>
<p>1.拉伸。。。</p>
<p>就是吧图片拉伸成正方形</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> width = bitmap.getWidth();</span><br><span class="line"><span class="keyword">int</span> height = bitmap.getHeight();</span><br><span class="line"><span class="comment">// 计算缩放比例</span></span><br><span class="line"><span class="keyword">float</span> scaleWidth = ((<span class="keyword">float</span>) <span class="number">300</span>) / width;</span><br><span class="line"><span class="keyword">float</span> scaleHeight = ((<span class="keyword">float</span>) <span class="number">300</span>) / height;</span><br><span class="line"><span class="comment">// 取得想要缩放的matrix参数</span></span><br><span class="line">Matrix matrix = <span class="keyword">new</span> Matrix();</span><br><span class="line">matrix.postScale(scaleWidth, scaleHeight);</span><br><span class="line"><span class="comment">// 得到新的图片</span></span><br><span class="line">Bitmap bitmap = Bitmap.createBitmap(bitmap, <span class="number">0</span>, <span class="number">0</span>, width, height, matrix, <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<p>写好测试后我立马就疯了。这拉伸。哎。不能放在头像功能这。把我帅气的自拍弄得太丑了。简直不能忍，</p>
<p>2.截取部分图片。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> width = bitmap.getWidth();</span><br><span class="line"><span class="keyword">int</span> height = bitmap.getHeight();</span><br><span class="line"><span class="keyword">if</span> (width&amp;gt;height)&#123;</span><br><span class="line">	Bitmap bitmap = Bitmap.createBitmap(bitmap,(width-height)/<span class="number">2</span>,<span class="number">0</span>,height,height);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">	Bitmap bitmap = Bitmap.createBitmap(bitmap,<span class="number">0</span>,(height-width)/<span class="number">2</span>,width,width);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样就成功从图片中间截取正方形部分出来了。恩。爽多了。其实这个功能可以改改的。让用户自己从图片上选取正方形部分出来。昂。我是想可以这么做的。But。还没这么干。回头写好了再贴出来吧。</p>
<p>PS：以上观点仅仅是作者自己的想法。如果有更好的处理方案什么的。欢迎各位指出。谢谢谢谢谢、</p>
<h2 id="u2014_u20142016-1-23_u53F7_u66F4_u65B0_u2014_u2014"><a href="#u2014_u20142016-1-23_u53F7_u66F4_u65B0_u2014_u2014" class="headerlink" title="——2016-1-23号更新——"></a>——2016-1-23号更新——</h2><p>发现了一种更好的调用系统图库获取图片并裁剪的方法.</p>
<p>1.首先依然是调用系统图库并要求返回图片数据<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_PICK, <span class="keyword">null</span>);</span><br><span class="line">intent.setDataAndType(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,<span class="string">"image/*"</span>);</span><br><span class="line">startActivityForResult(intent, PHOTO_REQUEST_GALLERY);</span><br></pre></td></tr></table></figure></p>
<p>2.依然是通过onActivityResult来获取到返回的数据<br>这里因为会涉及到图片裁剪.所以需要做一下返回数据的判断.在上面获取图片的时候有进行标记 ‘PHOTO_REQUEST_GALLERY’ 这表示返回的是选择后的图片.还一个是 ‘PHOTO_REQUEST_CUT’ 这表示获取到裁剪后的图片.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (requestCode) &#123;</span><br><span class="line">    <span class="keyword">case</span> PHOTO_REQUEST_GALLERY:</span><br><span class="line">        <span class="keyword">if</span> (data != <span class="keyword">null</span>) &#123;</span><br><span class="line">            startPhotoZoom(data.getData(), <span class="number">150</span>); <span class="comment">//调用裁剪图片的方法</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> PHOTO_REQUEST_CUT:</span><br><span class="line">        <span class="keyword">if</span> (data != <span class="keyword">null</span>) &#123;</span><br><span class="line">            setPicToView(data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>3.startPhotoZoom(Uri uri, int size)方法.是根据数据和设定的 size 大小来要求用户裁剪图片.调用系统自带的裁剪图片的页面.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(<span class="string">"com.android.camera.action.CROP"</span>);</span><br><span class="line">intent.setDataAndType(uri, <span class="string">"image/*"</span>);</span><br><span class="line"><span class="comment">// crop为true是设置在开启的intent中设置显示的view可以剪裁</span></span><br><span class="line">intent.putExtra(<span class="string">"crop"</span>, <span class="string">"true"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// aspectX aspectY 是宽高的比例</span></span><br><span class="line">intent.putExtra(<span class="string">"aspectX"</span>, <span class="number">1</span>);</span><br><span class="line">intent.putExtra(<span class="string">"aspectY"</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// outputX,outputY 是剪裁图片的宽高</span></span><br><span class="line">intent.putExtra(<span class="string">"outputX"</span>, size);</span><br><span class="line">intent.putExtra(<span class="string">"outputY"</span>, size);</span><br><span class="line">intent.putExtra(<span class="string">"return-data"</span>, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">startActivityForResult(intent, PHOTO_REQUEST_CUT);</span><br></pre></td></tr></table></figure></p>
<p>4.获取到返回的数据进行在 2 中介绍到了<br>5.从 data 中获取数据<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Bundle bundle = picdata.getExtras();</span><br><span class="line"><span class="keyword">if</span> (bundle != <span class="keyword">null</span>) &#123;</span><br><span class="line">    bmp = bundle.getParcelable(<span class="string">"data"</span>);<span class="comment">//获取到图片</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>不得不说的是,通过这样的方法来获取图片的话.三星手机也能够正常获取了.PS:我真的不是在黑三星.</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="../blog/2015/08/01/原-关于使用PopupWindow的遇到的一些小问题/" itemprop="url">
                  使用PopupWindow的遇到的一些小问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-08-01T07:57:21+08:00" content="2015-08-01">
              2015-08-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="../blog/2015/08/01/原-关于使用PopupWindow的遇到的一些小问题/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/01/原-关于使用PopupWindow的遇到的一些小问题/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="../blog/2015/08/01/原-关于使用PopupWindow的遇到的一些小问题/" class="leancloud_visitors" data-flag-title="使用PopupWindow的遇到的一些小问题">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span style="font-size:18px">记得第一次使用PopupWindow是写一个按钮点击后弹出菜单的小玩意。那时候最纠结的就是PopupWindow显示的位置总是不尽人意。那时候试过这些方法：</span></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 相对某个控件的位置（正左下方），无偏移量</span></span><br><span class="line">PopupWindow.showAsDropDown(View anchor)</span><br><span class="line"><span class="comment">// 相对某个控件的位置，有偏移，xoff 为 X 轴的偏移量，yoff 为 Y 轴的偏移量                          </span></span><br><span class="line">PopupWindow.showAsDropDown(View anchor, <span class="keyword">int</span> xoff, <span class="keyword">int</span> yoff)</span><br><span class="line"><span class="comment">// 在父容器的什么位置，gravity 为相对位置，如：正中央 Gravity.CENTER、下方 Gravity.BOTTOM、Gravity.RIGHT|Gravity.BOTTOM 右下方等，后面两个参数为 x/y 轴的偏移量。</span></span><br><span class="line">PopupWindow.showAtLocation(View parent, <span class="keyword">int</span> gravity, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span><br></pre></td></tr></table></figure>
<p>虽然最后是成功解决了问题。但是感觉有些时候使用起来很麻烦。因为需要通过父容器以及PopupWindow自身的大小来进行计算偏移量。最后的我解决方案是直接将PopupWindow的大小设置为全屏。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Rect outRect = <span class="keyword">new</span> Rect();</span><br><span class="line">getWindow().getDecorView().getWindowVisibleDisplayFrame(outRect);<span class="comment">//获取屏幕的大小</span></span><br><span class="line">PopupWindow popupWindow = <span class="keyword">new</span> PopupWindow(view, outRect.width(), outRect.height());<span class="comment">//设置PopupWindow的大小为除通知栏之外的全屏幕</span></span><br><span class="line">popupWindow.showAsDropDown(View.inflate(<span class="keyword">this</span>, R.layout.activity, <span class="keyword">null</span>), <span class="number">0</span>, outRect.top);<span class="comment">//设置PopupWindow的显示位置为除通知栏的全屏幕</span></span><br></pre></td></tr></table></figure>
<p><span style="font-size:18px">这时候要注意的是。你设置成全屏大小了。不可能全屏都是你的菜单吧。所以要在空白部分放上一个空的View。还要加上点击事件。直接调用dismiss方法。以达到使PopupWindow关闭的目的。</span></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">view.findViewById(R.id.view).setOnClickListener(<span class="keyword">new</span> OnClickListener() &#123;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        popupWindow.dismiss();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这下就爽了。然后很多时候我也喜欢这么用了。因为我可以很任性的设置PopupWindow所该存在的位置。但是有有问题了。。就是对于类&#20284;一个ListView里面的Item点击弹出PopupWindow的。。因为弹出的PopupWindow一样。但是位置不一样。于是。我又老老实实的用回了相对位置的方法。。当然，使用的时候要学会具体情况具体分析昂。</p>
<p><span style="font-size:18px"></span></p>
<p></p>
<p><span style="font-size:18px">然后是一些关于PopupWindow我遇到的一些小问题的解决方法：</span></p>
<p><span style="font-size:18px">PopupWindow打开和关闭动画：</span></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">popupWindow.setAnimationStyle(R.style.AnimationPreview);<span class="comment">//设置动画文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span> <span class="attribute">name</span>= <span class="attribute">AnimationPreview</span> &gt;</span><span class="css"></span><br><span class="line">        &lt;<span class="tag">item</span> <span class="tag">name</span>= <span class="tag">android</span><span class="pseudo">:windowEnterAnimation</span> &gt;<span class="at_rule">@<span class="keyword">anim/show_win_in&lt;/item&gt;&lt;--打开动画--&gt;</span></span><br><span class="line">        &lt;item name= android:windowExitAnimation &gt;@anim/show_win_out&lt;/item&gt;&lt;--关闭动画--&gt;&lt;/span&gt;</span><br><span class="line"></span></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>show_win_in和show_win_out里面就是最基本的动画资源文件了。</p>
<p>PopupWindow中ListView点击无响应：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">popupWindow.setFocusable(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<p><span style="font-size:18px"></span></p>
<p></p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="../blog/2015/07/26/转-Java-Base64、AES、SHA1、MD5加密算法/" itemprop="url">
                  Java Base64、AES、SHA1、MD5加密算法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-07-26T14:15:52+08:00" content="2015-07-26">
              2015-07-26
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="../blog/2015/07/26/转-Java-Base64、AES、SHA1、MD5加密算法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/26/转-Java-Base64、AES、SHA1、MD5加密算法/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="../blog/2015/07/26/转-Java-Base64、AES、SHA1、MD5加密算法/" class="leancloud_visitors" data-flag-title="Java Base64、AES、SHA1、MD5加密算法">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecriptTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">SHA1</span><span class="params">(String decript)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            MessageDigest digest = java.security.MessageDigest</span><br><span class="line">                    .getInstance(&amp;quot;SHA-<span class="number">1</span>&amp;quot;);</span><br><span class="line">            digest.update(decript.getBytes());</span><br><span class="line">            <span class="keyword">byte</span> messageDigest[] = digest.digest();</span><br><span class="line">            <span class="comment">// Create Hex String</span></span><br><span class="line">            StringBuffer hexString = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            <span class="comment">// 字节数组转换为 十六进制 数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; messageDigest.length; i++) &#123;</span><br><span class="line">                String shaHex = Integer.toHexString(messageDigest[i] &amp;amp; <span class="number">0xFF</span>);</span><br><span class="line">                <span class="keyword">if</span> (shaHex.length() &amp;lt; <span class="number">2</span>) &#123;</span><br><span class="line">                    hexString.append(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                hexString.append(shaHex);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> hexString.toString();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &amp;quot;&amp;quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">SHA</span><span class="params">(String decript)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            MessageDigest digest = java.security.MessageDigest</span><br><span class="line">                    .getInstance(&amp;quot;SHA&amp;quot;);</span><br><span class="line">            digest.update(decript.getBytes());</span><br><span class="line">            <span class="keyword">byte</span> messageDigest[] = digest.digest();</span><br><span class="line">            <span class="comment">// Create Hex String</span></span><br><span class="line">            StringBuffer hexString = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            <span class="comment">// 字节数组转换为 十六进制 数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; messageDigest.length; i++) &#123;</span><br><span class="line">                String shaHex = Integer.toHexString(messageDigest[i] &amp;amp; <span class="number">0xFF</span>);</span><br><span class="line">                <span class="keyword">if</span> (shaHex.length() &amp;lt; <span class="number">2</span>) &#123;</span><br><span class="line">                    hexString.append(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                hexString.append(shaHex);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> hexString.toString();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &amp;quot;&amp;quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">MD5</span><span class="params">(String input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 获得MD5摘要算法的 MessageDigest 对象</span></span><br><span class="line">            MessageDigest mdInst = MessageDigest.getInstance(&amp;quot;MD5&amp;quot;);</span><br><span class="line">            <span class="comment">// 使用指定的字节更新摘要</span></span><br><span class="line">            mdInst.update(input.getBytes());</span><br><span class="line">            <span class="comment">// 获得密文</span></span><br><span class="line">            <span class="keyword">byte</span>[] md = mdInst.digest();</span><br><span class="line">            <span class="comment">// 把密文转换成十六进制的字符串形式</span></span><br><span class="line">            StringBuffer hexString = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            <span class="comment">// 字节数组转换为 十六进制 数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; md.length; i++) &#123;</span><br><span class="line">                String shaHex = Integer.toHexString(md[i] &amp;amp; <span class="number">0xFF</span>);</span><br><span class="line">                <span class="keyword">if</span> (shaHex.length() &amp;lt; <span class="number">2</span>) &#123;</span><br><span class="line">                    hexString.append(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                hexString.append(shaHex);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> hexString.toString();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &amp;quot;&amp;quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 加密</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> content</span><br><span class="line">     *            需要加密的内容</span><br><span class="line">     * <span class="doctag">@param</span> password</span><br><span class="line">     *            加密密码</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] encryptAES(String content, String password) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            KeyGenerator kgen = KeyGenerator.getInstance(&amp;quot;AES&amp;quot;);</span><br><span class="line">            kgen.init(<span class="number">128</span>, <span class="keyword">new</span> SecureRandom(password.getBytes()));</span><br><span class="line">            SecretKey secretKey = kgen.generateKey();</span><br><span class="line">            <span class="keyword">byte</span>[] enCodeFormat = secretKey.getEncoded();</span><br><span class="line">            SecretKeySpec key = <span class="keyword">new</span> SecretKeySpec(enCodeFormat, &amp;quot;AES&amp;quot;);</span><br><span class="line">            Cipher cipher = Cipher.getInstance(&amp;quot;AES&amp;quot;);<span class="comment">// 创建密码器</span></span><br><span class="line">            <span class="keyword">byte</span>[] byteContent = content.getBytes(&amp;quot;utf-<span class="number">8</span>&amp;quot;);</span><br><span class="line">            cipher.init(Cipher.ENCRYPT_MODE, key);<span class="comment">// 初始化</span></span><br><span class="line">            <span class="keyword">byte</span>[] result = cipher.doFinal(byteContent);</span><br><span class="line">            <span class="keyword">return</span> result; <span class="comment">// 加密</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchPaddingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvalidKeyException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalBlockSizeException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (BadPaddingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * 解密</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> content</span><br><span class="line">     *            待解密内容</span><br><span class="line">     * <span class="doctag">@param</span> password</span><br><span class="line">     *            解密密钥</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] decryptAES(<span class="keyword">byte</span>[] content, String password) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            KeyGenerator kgen = KeyGenerator.getInstance(&amp;quot;AES&amp;quot;);</span><br><span class="line">            kgen.init(<span class="number">128</span>, <span class="keyword">new</span> SecureRandom(password.getBytes()));</span><br><span class="line">            SecretKey secretKey = kgen.generateKey();</span><br><span class="line">            <span class="keyword">byte</span>[] enCodeFormat = secretKey.getEncoded();</span><br><span class="line">            SecretKeySpec key = <span class="keyword">new</span> SecretKeySpec(enCodeFormat, &amp;quot;AES&amp;quot;);</span><br><span class="line">            Cipher cipher = Cipher.getInstance(&amp;quot;AES&amp;quot;);<span class="comment">// 创建密码器</span></span><br><span class="line">            cipher.init(Cipher.DECRYPT_MODE, key);<span class="comment">// 初始化</span></span><br><span class="line">            <span class="keyword">byte</span>[] result = cipher.doFinal(content);</span><br><span class="line">            <span class="keyword">return</span> result; <span class="comment">// 加密</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchPaddingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvalidKeyException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalBlockSizeException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (BadPaddingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * BASE64解密</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> key</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     * <span class="doctag">@throws</span> Exception</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">decryptBASE64</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &amp;quot;&amp;quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * BASE64加密</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> key</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     * <span class="doctag">@throws</span> Exception</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encryptBASE64</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &amp;quot;&amp;quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>出处：<a href="http://www.open-open.com/lib/view/open1392185662160.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1392185662160.html</a></p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="../blog/page/2/">2</a><a class="extend next" rel="next" href="../blog/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="./images/icon.png"
               alt="敲代码的搬砖工" />
          <p class="site-author-name" itemprop="name">敲代码的搬砖工</p>
          <p class="site-description motion-element" itemprop="description">一个只会敲代码的搬砖工</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">11</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">6</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/BeginLjm" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/qiao-dai-ma-de-ban-zhuan-gong" target="_blank">
                  
                    <i class="fa fa-globe"></i> Zhihu
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/2569097247" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name">友情链接</p>
            
              <span class="links-of-author-item">
                <a href="http://blog.zealyw.com" target="_blank">zealyw</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://halamyc.me" target="_blank">HalaMyc</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://hexo.gorgiaxx.com" target="_blank">gorgiaxx</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.primavera.wang" target="_blank">primavera</a>
              </span>
            
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  


  



  <script type="text/javascript" src="../blog/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="../blog/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="../blog/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="../blog/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="../blog/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="../blog/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="../blog/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="../blog/js/src/motion.js?v=0.5.0"></script>



  
  


  <script type="text/javascript" src="../blog/js/src/affix.js?v=0.5.0"></script>

  <script type="text/javascript" src="../blog/js/src/schemes/pisces.js?v=0.5.0"></script>



  

  


  <script type="text/javascript" src="../blog/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"begin"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  

  
  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("wqL8UzhsyhoOfgFa9OJOYJ7f-gzGzoHsz", "7rdhlbPdQfHDIUeNwffUqBOC");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>




</body>
</html>
